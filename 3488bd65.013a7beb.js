(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{135:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=u(n),d=a,m=b["".concat(o,".").concat(d)]||b[d]||p[d]||c;return n?r.a.createElement(m,i(i({ref:t},l),{},{components:n})):r.a.createElement(m,i({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,o=new Array(c);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var l=2;l<c;l++)o[l]=n[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},202:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/rds1-3e86198587c111554c98d4f3824e57bb.png"},203:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/rds2-1d184384c652644266ff2413d84b860e.png"},204:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/rds3-5bc85f2507d31a08e7dcd08270985656.png"},84:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var a=n(3),r=n(7),c=(n(0),n(135)),o={id:"rds_access",title:"Access to RDS in a private subnet from local machine"},i={unversionedId:"rds_access",id:"rds_access",isDocsHomePage:!1,title:"Access to RDS in a private subnet from local machine",description:"Securely connecting to an AWS RDS instance",source:"@site/docs/rds_access.md",slug:"/rds_access",permalink:"/Infrastructure-Playbook/rds_access",editUrl:"https://github.com/LBHackney-IT/Infrastructure-Playbook/edit/master/docs/rds_access.md",version:"current"},s=[{value:"Securely connecting to an AWS RDS instance",id:"securely-connecting-to-an-aws-rds-instance",children:[]},{value:"Pre-requisites",id:"pre-requisites",children:[]},{value:"Steps",id:"steps",children:[{value:"1 - AWS credentials",id:"1---aws-credentials",children:[]},{value:"2 - Connecting to RDS",id:"2---connecting-to-rds",children:[]}]}],l={toc:s};function u(e){var t=e.components,o=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},l,o,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"securely-connecting-to-an-aws-rds-instance"},"Securely connecting to an AWS RDS instance"),Object(c.b)("p",null,"The instructions will help you connect to an AWS RDS instance without the need for that RDS resource to have a publicly available DNS. This connection can be made using a database client such as pgadmin.  You will utilise AWS session manager to connect to a Bastion host (or jumpbox) within the same AWS account as your desired RDS database."),Object(c.b)("h2",{id:"pre-requisites"},"Pre-requisites"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"The AWS CLI installed - ",Object(c.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html"},"guide"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"The AWS session manager plugin installed - ",Object(c.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html"},"guide")))),Object(c.b)("ol",{start:3},Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"A SSH client installed - ",Object(c.b)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse"},"guide for Windows"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Your Google account be given the relevant permissions to the AWS account and the EC2 instance (jumpbox)")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"The instance ID of the jumpbox")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"The private key for the EC2 instance that you will be connecting through"))),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," You will also need : ")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"The DNS of the RDS instance you want to connect to")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"The port that is open on that RDS instance")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"The database within the RDS instance you want to connect to")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"The database credentials for the RDS instance you want to connect to"))),Object(c.b)("h2",{id:"steps"},"Steps"),Object(c.b)("h3",{id:"1---aws-credentials"},"1 - AWS credentials"),Object(c.b)("p",null,"Ensure that you have up to date AWS credentials for the account you want to access."),Object(c.b)("p",null,"There are multiple ways to do this, you can read the guidance ",Object(c.b)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html"},"here"),"."),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," Here we will describe one of them: ")),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Go to ",Object(c.b)("a",{parentName:"p",href:"https://hackney.awsapps.com/start#/"},"https://hackney.awsapps.com/start#/")," and log in using your Google account credentials")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Expand the account that you will need access to and click on \u201cCommand line or programmatic access\u201d next to the role that you want to use."))),Object(c.b)("p",null,"The role you will be using will have been explained to you beforehand."),Object(c.b)("p",null,Object(c.b)("img",{alt:"Select role - AWS Console",src:n(202).default})),Object(c.b)("ol",{start:3},Object(c.b)("li",{parentName:"ol"},"You are then provided with instructions on how to add the credentials you will be authenticating with (note macOs and Windows options).")),Object(c.b)("p",null,Object(c.b)("img",{alt:"AWS credentials",src:n(203).default})),Object(c.b)("h3",{id:"2---connecting-to-rds"},"2 - Connecting to RDS"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"}," In a shell - run the below command replacing the values in the table below with the ones for your connection. ")),Object(c.b)("p",null,Object(c.b)("img",{alt:"Commands to connect to RDS",src:n(204).default})),Object(c.b)("p",null,"You can then connect using your client on ",Object(c.b)("inlineCode",{parentName:"p"},"127.0.0.1:9999")))}u.isMDXComponent=!0}}]);