(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{106:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return m}));var a=r(0),n=r.n(a);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=n.a.createContext({}),p=function(e){var t=n.a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):u(u({},t),e)),r},s=function(e){var t=p(e.components);return n.a.createElement(i.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=n.a.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),s=p(r),d=a,m=s["".concat(c,".").concat(d)]||s[d]||b[d]||o;return r?n.a.createElement(m,u(u({ref:t},i),{},{components:r})):n.a.createElement(m,u({ref:t},i))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,c=new Array(o);c[0]=d;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:a,c[1]=u;for(var i=2;i<o;i++)c[i]=r[i];return n.a.createElement.apply(null,c)}return n.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},76:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return c})),r.d(t,"metadata",(function(){return u})),r.d(t,"toc",(function(){return l})),r.d(t,"default",(function(){return p}));var a=r(3),n=r(7),o=(r(0),r(106)),c={id:"backups",title:"Backup module"},u={unversionedId:"backups",id:"backups",isDocsHomePage:!1,title:"Backup module",description:"Our backup service",source:"@site/docs/backups.md",slug:"/backups",permalink:"/Infrastructure-Playbook/backups",editUrl:"https://github.com/LBHackney-IT/Infrastructure-Playbook/edit/master/docs/backups.md",version:"current",sidebar:"docs",previous:{title:"Change Process",permalink:"/Infrastructure-Playbook/change_process"},next:{title:"AWS CLI",permalink:"/Infrastructure-Playbook/aws_cli"}},l=[{value:"Our backup service",id:"our-backup-service",children:[]},{value:"What is backed up?",id:"what-is-backed-up",children:[]},{value:"The default backup policy",id:"the-default-backup-policy",children:[]},{value:"How to apply the policy",id:"how-to-apply-the-policy",children:[]},{value:"How to retrieve a backup",id:"how-to-retrieve-a-backup",children:[]}],i={toc:l};function p(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},i,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h3",{id:"our-backup-service"},"Our backup service"),Object(o.b)("p",null,"We use ",Object(o.b)("a",{parentName:"p",href:"https://aws.amazon.com/backup/"},"AWS Backup"),", which is managed via a Terraform module in the infrastructure repo. "),Object(o.b)("h3",{id:"what-is-backed-up"},"What is backed up?"),Object(o.b)("p",null,"The AWS Backup service creates backups of the following AWS resources:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Amazon Elastic Compute Cloud (Amazon EC2) instances"),Object(o.b)("li",{parentName:"ul"},"Amazon Elastic Block Store (Amazon EBS) volumes "),Object(o.b)("li",{parentName:"ul"},"Amazon Relational Database Service (RDS) databases "),Object(o.b)("li",{parentName:"ul"},"Amazon DynamoDB tables"),Object(o.b)("li",{parentName:"ul"},"Amazon Elastic File System (EFS)")),Object(o.b)("p",null,"One copy will be held locally in the same account. A second backup will be created in a special account but only where the resource has been created with a Customer-Managed Key. The Vault can only be accessed by the Cloud Engineering team. "),Object(o.b)("h3",{id:"the-default-backup-policy"},"The default backup policy"),Object(o.b)("p",null,"The service applies the default policy:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"RPO 24 hours"),Object(o.b)("li",{parentName:"ul"},"RTO 4 hours"),Object(o.b)("li",{parentName:"ul"},"30-day immutable retention")),Object(o.b)("p",null,"It is possible to vary the RPO and RTO values but this must be signed off by the Information Asset Owner and documented. See the ",Object(o.b)("a",{parentName:"p",href:"https://docs.google.com/document/d/10rfxfpw48lgwcJkGqsk2G1oWl-k0SnRmFxhocoLIejc/edit"},"Backup Policy")," for full details. "),Object(o.b)("h3",{id:"how-to-apply-the-policy"},"How to apply the policy"),Object(o.b)("p",null,"The Terraform tags required are in the Tagging Module. If you have run your Terraform build since early July 2021, they will already be there. The tags required are:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},'        key = "BackupPolicy"\n        value = "env"\n')),Object(o.b)("p",null,"Where \u201cenv\u201d is one of \u201cDev\u201d, \u201cStg\u201d, or \u201cProd\u201d depending on the environment you wish to back up. This will apply the default policy. "),Object(o.b)("p",null,"If your Terraform does not have these tags, please run the latest build from the Infrastructure repo, or (as an absolute last resort) add them manually. "),Object(o.b)("h3",{id:"how-to-retrieve-a-backup"},"How to retrieve a backup"),Object(o.b)("p",null,"The backup Vault can only be accessed by the Cloud Engineering team. If you need a backup, post in #ask-devops in Slack for the quickest response."))}p.isMDXComponent=!0}}]);