(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{91:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return i})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return u}));var n=a(3),r=a(7),o=(a(0),a(97)),c={id:"creating_accounts",title:"Creating a new AWS account"},i={unversionedId:"creating_accounts",id:"creating_accounts",isDocsHomePage:!1,title:"Creating a new AWS account",description:"How to request a new AWS account",source:"@site/docs/creating_accounts.md",slug:"/creating_accounts",permalink:"/Infrastructure-Playbook/creating_accounts",editUrl:"https://github.com/LBHackney-IT/Infrastructure-Playbook/edit/master/docs/creating_accounts.md",version:"current",sidebar:"docs",previous:{title:"Certificate module",permalink:"/Infrastructure-Playbook/certificates"},next:{title:"DNS Module",permalink:"/Infrastructure-Playbook/dns"}},s=[{value:"How to request a new AWS account",id:"how-to-request-a-new-aws-account",children:[{value:"This represents the current process to request a new account in AWS. It will change once HaloITSM is in use, see below.",id:"this-represents-the-current-process-to-request-a-new-account-in-aws-it-will-change-once-haloitsm-is-in-use-see-below",children:[]},{value:"Do I need a new account?",id:"do-i-need-a-new-account",children:[]}]},{value:"Creating a new account (CE team members)",id:"creating-a-new-account-ce-team-members",children:[{value:"Create an Account in Service Catalog",id:"create-an-account-in-service-catalog",children:[]},{value:"Create a password for the root user and set up MFA",id:"create-a-password-for-the-root-user-and-set-up-mfa",children:[]},{value:"Set up MFA for the Account",id:"set-up-mfa-for-the-account",children:[]},{value:"Assign Users to the New Account",id:"assign-users-to-the-new-account",children:[]},{value:"Create a Secret in GitHub (if necessary)",id:"create-a-secret-in-github-if-necessary",children:[]}]}],l={toc:s};function u(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"how-to-request-a-new-aws-account"},"How to request a new AWS account"),Object(o.b)("h3",{id:"this-represents-the-current-process-to-request-a-new-account-in-aws-it-will-change-once-haloitsm-is-in-use-see-below"},"This represents the current process to request a new account in AWS. It will change once HaloITSM is in use, see below."),Object(o.b)("p",null,"AWS accounts can only be created by the Cloud Engineering team. Request a new account in the ",Object(o.b)("a",{parentName:"p",href:"https://hackit-lbh.slack.com/archives/C01FX9ERRSL"},"#ask-devops")," channel in Slack, with the following details:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Name of account"),Object(o.b)("li",{parentName:"ul"},"Environment"),Object(o.b)("li",{parentName:"ul"},"Name of team/project and people who should have access")),Object(o.b)("p",null,"An account will be created for you along with a Google Group to control access to the account."),Object(o.b)("p",null,"Once HaloITSM is in use, you must use that to raise your request. "),Object(o.b)("h3",{id:"do-i-need-a-new-account"},"Do I need a new account?"),Object(o.b)("p",null,"You may not need a new account. We try to group similar applications together, such as all housing applications in the Housing account. However, you may want to take into account the following:\nWill a third party need access?\nWill the application host a large amount of personal and/or sensitive data?"),Object(o.b)("p",null,"There may be an existing account that is suitable for your application. If in doubt, please check with the team first in ",Object(o.b)("a",{parentName:"p",href:"https://hackit-lbh.slack.com/archives/C01FX9ERRSL"},"#ask-devops")),Object(o.b)("h2",{id:"creating-a-new-account-ce-team-members"},"Creating a new account (CE team members)"),Object(o.b)("h3",{id:"create-an-account-in-service-catalog"},"Create an Account in Service Catalog"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Go to the HackIT account"),Object(o.b)("li",{parentName:"ul"},"Sign in as Administrator or Service Catalog End User"),Object(o.b)("li",{parentName:"ul"},"Go to Service Catalog"),Object(o.b)("li",{parentName:"ul"},"Set Location to Ireland"),Object(o.b)("li",{parentName:"ul"},"Go to Products, select the radio button for Control Tower - Account Factory"),Object(o.b)("li",{parentName:"ul"},"Click Launch Product")),Object(o.b)("p",null,"Add Provisioned Product Name as per standards"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"e.g. Xpress-Staging (delimiter is hyphen)")),Object(o.b)("p",null,"Account email as per formula:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"hackitplatform+","[account name, including environment, as above]","@hackney.gov.uk"),Object(o.b)("li",{parentName:"ul"},"e.g. ",Object(o.b)("a",{parentName:"li",href:"mailto:hackitplatform+xpress-staging@hackney.gov.uk"},"hackitplatform+xpress-staging@hackney.gov.uk"))),Object(o.b)("p",null,"Account Name as above: Provisioned Product Name."),Object(o.b)("p",null,"Managed Organizational Unit: Select from dropdown, e.g. Staging, Production, etc. "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"SSOUserEmailAddress: ",Object(o.b)("a",{parentName:"li",href:"mailto:saml-aws-devops@hackney.gov.uk"},"saml-aws-devops@hackney.gov.uk")),Object(o.b)("li",{parentName:"ul"},"SSOUserFirstName: Cloud"),Object(o.b)("li",{parentName:"ul"},"SSOUserLastName: Engineering")),Object(o.b)("h3",{id:"create-a-password-for-the-root-user-and-set-up-mfa"},"Create a password for the root user and set up MFA"),Object(o.b)("p",null,"Each new account needs to have credentials set up for the root user for that account.\nOn initial account creation there will be no password, so you need to create a password.  "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Open an incognito browser and go to the AWS Console"),Object(o.b)("li",{parentName:"ul"},"Add the root user email address ","[see account email above]",", do the captcha, then select \u201cForgot password?\u201d")),Object(o.b)("p",null,"An email will be sent to the mailbox for ",Object(o.b)("a",{parentName:"p",href:"mailto:hackitplatform@hackney.gov.uk"},"hackitplatform@hackney.gov.uk"),", which, as of November 2021, is accessible to Matt Keyworth, Frank Barnett, Rashmi Shetty, Mirela Georgieva and Selwyn Preston. Please ask one of these users to click the link and create a password for the account. "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"The username and password should be stored in the HackIT_AWS_Root_Credentials vault in 1Password. (The same individuals have access to this vault.)")),Object(o.b)("h3",{id:"set-up-mfa-for-the-account"},"Set up MFA for the Account"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Once the password is set up, MFA needs to be configured for the user"),Object(o.b)("li",{parentName:"ul"},"Follow these instructions AND, in addition, when you click on \u201cShow QR code\u201d make sure you screenshot or snip the QR code"),Object(o.b)("li",{parentName:"ul"},"Send the image of the QR code to one of the people listed above for storage in a restricted-access Drive")),Object(o.b)("h3",{id:"assign-users-to-the-new-account"},"Assign Users to the New Account"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Sign into HackIT again as SSO-Admin and select AWS Single Sign On"),Object(o.b)("li",{parentName:"ul"},"Find the newly-created account; assign users as necessary")),Object(o.b)("h3",{id:"create-a-secret-in-github-if-necessary"},"Create a Secret in GitHub (if necessary)"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Open the Infrastructure repo in GitHub"),Object(o.b)("li",{parentName:"ul"},"Go to Settings"),Object(o.b)("li",{parentName:"ul"},"Choose Secrets in the left-hand panel"),Object(o.b)("li",{parentName:"ul"},"Choose New Repository Secret"),Object(o.b)("li",{parentName:"ul"},"Add the name as per the naming conventions: all caps, underscore as delimiter, prefixed by AWS_ACCOUNT e.g. AWS_ACCOUNT_ACADEMY_PRODUCTION"),Object(o.b)("li",{parentName:"ul"},"Add the account number as the value and choose Add Secret")))}u.isMDXComponent=!0},97:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},b=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=u(a),d=n,h=b["".concat(c,".").concat(d)]||b[d]||p[d]||o;return a?r.a.createElement(h,i(i({ref:t},l),{},{components:a})):r.a.createElement(h,i({ref:t},l))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,c=new Array(o);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,c[1]=i;for(var l=2;l<o;l++)c[l]=a[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);